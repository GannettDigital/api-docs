# CRM Integration (BETA)

![Integration](/images/integration.png)

We have APIs, Webhooks and apps on the Zapier marketplace to support CRM integrations.

**API (Interface to the data)**

* Contacts
* Contact Interactions

**Webhook (Event driven automated interface to the data)**

* Contacts
* Contact Interactions

**Apps on Zapier Marketplace**

* Contacts
* Contact Interactions. (Coming soon)

*Note: These APIs and Webhooks are in the Beta. Clients have the opportunity to get access to the API during this time and leverage the API team's expertise and experience. The API technical and product team will be available to engage with the client's technical team during the development and testing cycle. We will also actively collect the feedback from beta clients and enhance the API, bypassing the normal roadmap process. The beta phase ends in April 2019.*
 
*Once the beta phase is complete, these APIs will continue to be publicly available with the standard support process. All future enhancements to the API will be prioritized and added to the roadmap, if warranted, as per the normal product lifecycle.*

## Get Contacts for an Advertiser

**Summary:** This endpoint supports integration with CRM products. It returns all interactions (or leads) generated by a campaign for an advertiser.  The response is organized by campaigns with the interactions nested within. Please note that the response also includes the associated contact and its meta data.

**Parameters:**  It requires the following parameters for a successful response: GMAID (advertiser ID), created_before date and created_after_date.
 
**Recommended usage pattern:**  A one-time call to the API to fetch all past interactions recorded by the LocaliQ platform., followed by daily recurrent calls for a 2 -3-day period to fetch new interactions. The results are paginated. If there is no data for a particular attribute, it will not be present in the results.
 
Please note that the contact information in this endpoint is for linking the interactions/leads with the contact. Importing them as contacts into your CRM from this endpoint will cause duplicates.

```ruby
require 'uri'
require 'net/http'

url = URI("https://api.reachlocalservices.com/crm/contacts?global_master_advertiser_id=USA_142687&created_after_date=2019-01-01&created_before_date=2019-01-10")

http = Net::HTTP.new(url.host, url.port)

request = Net::HTTP::Get.new(url)
request["Authorization"] = 'OAUTH_ACCESS_TOKEN'

response = http.request(request)
puts response.read_body
```

```java
OkHttpClient client = new OkHttpClient();

Request request = new Request.Builder()
  .url("https://api.reachlocalservices.com/crm/contacts?global_master_advertiser_id=USA_142687&created_after_date=2019-01-01&created_before_date=2019-01-10")
  .get()
  .addHeader("Authorization", "OAUTH_ACCESS_TOKEN")
  .build();

Response response = client.newCall(request).execute();
```

```shell
curl --request GET \
  --url 'https://api.reachlocalservices.com/crm/contacts?global_master_advertiser_id=USA_142687&created_after_date=2019-01-01&created_before_date=2019-01-10' \
  --header 'Authorization: OAUTH_ACCESS_TOKEN'
```

> The above command returns JSON structured like this:

```json
{
    "global_master_advertiser_id": "USA_142687",
    "page": 1,
    "total_pages": 2,
    "next_page_location": "https://api.reachlocalservices.com/crm/contacts?created_after_date=2019-01-01&created_before_date=2019-01-10&global_master_advertiser_id=USA_142687&page=2",
    "contacts": [
        {
            "status": "pending_contact",
            "id": 862741,
            "created_at": "2019-01-04T15:24:31Z",
            "tags": [],
            "first_name": "Jatinm",
            "last_name": "Jasm",
            "email": "jatiin@k.com",
            "phone_work": "536633367",
            "address1": "21700 Oxnard st",
            "address2": "suite 1600",
            "city": "Woodland hills",
            "state": "California",
            "postal": "91367",
            "country": "United States of America"
        },
        {
            "status": "pending_contact",
            "id": 864211,
            "created_at": "2019-01-04T18:21:53Z",
            "tags": [],
            "first_name": "Presideo",
            "email": "pre@k.com"
        },
        {
            "status": "pending_contact",
            "id": 868881,
            "created_at": "2019-01-08T18:42:53Z",
            "tags": [
                "TRACY WONG'S FERRARI DEALERSHIP"
            ],
            "first_name": "Kiara",
            "last_name": "",
            "email": "kiara@l.com",
            "phone_work": ""
        },
        {
            "status": "pending_contact",
            "id": 869231,
            "created_at": "2019-01-08T20:51:03Z",
            "tags": [],
            "first_name": "Sachin",
            "last_name": "Arora",
            "email": "sachinarora82@yahoo.com",
            "phone_work": "8054042151",
            "address1": "8610 Oakdale Ave",
            "city": "Winnetka",
            "state": "CA",
            "postal": "91306",
            "country": "United States Minor Outlying Islands"
        },
        {
            "status": "pending_contact",
            "id": 869271,
            "created_at": "2019-01-08T21:43:31Z",
            "tags": [
                "Direct Site Traffic"
            ],
            "first_name": "Victer",
            "last_name": "",
            "email": "victer@j.com",
            "phone_work": ""
        }
        ...
    ]
}
```


### HTTP Request

`GET https://api.reachlocalservices.com/crm/contacts`

### Query Parameters

Parameter | Required | Default | Description
--------- | -------- |-------- | -----------
global\_master\_advertiser\_id | yes | none | The global master advertiser id (for example, USA_142687).
created\_after\_date | yes | none | Specifies the lower bound for the earliest date and time when searching for contacts.  All contacts returned in the response will have been created on or after this date.  The format expected is YYYY-MM-DD.
created\_before\_date | yes | none | Specifies the upper bound for the latest date and time when searching for contacts.  All contacts returned in the response will have been created before this date.  The format expected is YYYY-MM-DD.
page | no | 1 | The page number of the paginated result set to return.  This parameter is optional, but if the page requested doesnâ€™t exist in the result set defined by the other parameters an empty JSON array is returned.

### Contact Response Body
The body of the API response will contain metadata and a JSON array of contact objects.

#### MetaData
Field Name | Description
---------- | -----------
global\_master\_advertiser\_id | Global Master Advertiser ID of the contacts requested
page | Current page number being displayed
total_pages | Total number of pages of results
next\_page\_location | Complete URL that can be used to retrieve the next page of results.  Will be null if there are no more pages.

#### Contact
Field | Type | Nullable | Description
--------- | -------- |-------- |--------
id | Integer | no |An integer uniquely identifying this contact.
first_name | String | yes | The first name of the contact.
last_name | String | yes | The last name of the contact.
email | String | yes | The email address of the contact.
company | String | yes | The company name for this contact.
title | String | yes | The title for this contact.
phone_home | String | yes | The home phone number for this contact.
phone_work | String | yes | The work phone number for this contact.
phone_mobile | String | yes | The mobile phone number for this contact.
phone_fax | String | yes | The fax phone number for this contact.
address1 | String | yes | The first address line for this contact.
address2 | String | yes | The second address line for this contact.
city | String | yes | The city for this contact.
state | String | yes | The state for this contact.
postal | String | yes | The postal code for this contact.
country | String | yes | The country for this contact.
notes |String | yes | Free form text notes entered by end users for the contact.
tags | Array of String | yes | When present represents a collection of tags use for applying ad-hoc categorization and collation of contacts.
status | String | no | The status of the contact.  Valid values are **pending_contact**, **active_lead**, **client** and **none**.
created_at | Datetime | no | The date and time which this contact was created.
archived_at | Datetime | yes | The date and time which this contact was archived.


